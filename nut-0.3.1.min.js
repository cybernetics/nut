(function(def){if(typeof define=="function"){define(def)}else if(typeof module!="undefined"){module.exports=def}else{this.nut=def}})(function(){var doc=document,firstChild="firstChild",nextSibling="nextSibling",getElementsByClassName="getElementsByClassName",length="length",getNodesFromIdSelector=function(selector,context){var node=doc.getElementById(selector);if(!node){return[]}else{return[node]}},getNodesByClassName=function(name,context){var node=context[firstChild],nodes=[],elements;if(node){do{if(node.nodeType==1){if(node.className&&node.className.match("\\b"+name+"\\b")){nodes.push(node)}if((elements=getNodesByClassName(name,node))[length]){nodes=nodes.concat(elements)}}}while(node=node[nextSibling])}return nodes},getNodesFromClassSelector=function(selector,context){if(context[getElementsByClassName]){return context[getElementsByClassName](selector)}else{return getNodesByClassName(selector,context)}},getNodesFromTagSelector=function(selector,context){return context.getElementsByTagName(selector)};return function(selectors,context){if(!context){context=doc}if(typeof context=="object"&&context.pop){context=context[0]}var local_contexts,future_local_contexts,selector,elements,nodes=[],j,k,l,m,n,o,getNodesFromSelector;selectors=selectors.split(",");n=-1;while(selector=selectors[++n]){selectors[n]=selector.split(/\s+/)}j=selectors[length];while(j){local_contexts=[context];k=-1;l=selectors[--j][length];while(++k<l){if(selector=selectors[j][k]){if(selector.charAt(0)=="#"){selector=selector.substr(1);getNodesFromSelector=getNodesFromIdSelector}else if(selector.charAt(0)=="."){selector=selector.substr(1);getNodesFromSelector=getNodesFromClassSelector}else{getNodesFromSelector=getNodesFromTagSelector}future_local_contexts=[];m=-1;while(local_contexts[++m]){elements=getNodesFromSelector(selector,local_contexts[m]);n=-1;o=elements[length];while(++n<o){future_local_contexts.push(elements[n])}}local_contexts=future_local_contexts}}nodes=nodes.concat(local_contexts)}return nodes}}());